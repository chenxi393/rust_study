# rust学习
感觉cargo很好用啊，虽然之间看Rust，觉得语法很丑。。
而且是有设计思想的，感觉和go一样，在工具链，语言层面确保你不会写出太差的代码

看的是Rust程序设计语言 简体中文版
本来想看英文的，但是看的很慢


## 为什么选择rust
1. 编译器优化好，LLVM中间代码，提供53种编译器优化，go不到10种
2. 基于变量的所有权机制，无GC带来的性能损耗和延迟抖动
3. 内存安全（空指针，并发读写异常）

## 第一章
* `println!("Hello, world!");` 是一个宏而不是函数，!就表示是一个宏
* cargo很好用
* 使用 cargo new 创建项目。
* cargo build 构建二进制
* cargo run 构架二进制同时运行
* cargo check 不生成二进制的情况下检查代码错误


## 所有权 机制
Rust 内存管理
- 基于变量的所有权机制，Rust会在持有所有权的变量离开作用域时回收内存。好处是避免了GC的性能损耗和延迟抖动，付出的代价是需要牺牲部分编码效率来适应编译器规则。
所有权的原则是
  - Rust 中的每个值都有一个对应的变量作为它的所有者
  - 在同一时间内，只有且仅有一个所有者
  - 当所有者离开自己的作用域时，它持有的值就会被释放掉

Golang GC
- Golang 通过runtime实现的GC来管理内存的回收，开发者无需关注内存管理，可以自由编码。这样的好处是代码开发效率会比较高，代价则包括GC带来的性能损耗，**内存损耗和服务延迟抖动**等。
  Go 的垃圾回收器采用**标记-清除算法**，通过标记和清除不再需要的对象来进行垃圾收集
  GC 的**STW**（stop the world） 状态带来的一定抖动，以及内存用量增加导致一定程度上的内存浪费。


垂悬指针（Dangling Pointer）是指向已经释放或不再有效的内存地址的指针。
- Rust和Golang均不会有垂悬指针问题
- 而Golang则通过三色标记算法+屏障技术保证了不会误回收内存